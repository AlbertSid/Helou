(function(a,b){if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(e,f,d){a.Backbone=b(a,d,e,f)})}else{if(typeof exports!=="undefined"){var c=require("underscore");b(a,exports,c)}else{a.Backbone=b(a,{},a._,(a.jQuery||a.Zepto||a.ender||a.$))}}}(this,function(v,B,O,z){var D=v.Backbone;var g=[];var F=g.push;var o=g.slice;var u=g.splice;B.VERSION="1.1.2";B.$=z;B.noConflict=function(){v.Backbone=D;return this};B.emulateHTTP=false;B.emulateJSON=false;var L=B.Events={on:function(P,S,R){if(!y(this,"on",P,[S,R])||!S){return this}this._events||(this._events={});var Q=this._events[P]||(this._events[P]=[]);Q.push({callback:S,context:R,ctx:R||this});return this},once:function(Q,T,R){if(!y(this,"once",Q,[T,R])||!T){return this}var P=this;var S=O.once(function(){P.off(Q,S);T.apply(this,arguments)});S._callback=T;return this.on(Q,S,R)},off:function(P,Y,Q){var W,X,Z,V,U,R,T,S;if(!this._events||!y(this,"off",P,[Y,Q])){return this}if(!P&&!Y&&!Q){this._events=void 0;return this}V=P?[P]:O.keys(this._events);for(U=0,R=V.length;U<R;U++){P=V[U];if(Z=this._events[P]){this._events[P]=W=[];if(Y||Q){for(T=0,S=Z.length;T<S;T++){X=Z[T];if((Y&&Y!==X.callback&&Y!==X.callback._callback)||(Q&&Q!==X.context)){W.push(X)}}}if(!W.length){delete this._events[P]}}}return this},trigger:function(R){if(!this._events){return this}var Q=o.call(arguments,1);if(!y(this,"trigger",R,Q)){return this}var S=this._events[R];var P=this._events.all;if(S){b(S,Q)}if(P){b(P,arguments)}return this},stopListening:function(S,Q,U){var R=this._listeningTo;if(!R){return this}var P=!Q&&!U;if(!U&&typeof Q==="object"){U=this}if(S){(R={})[S._listenId]=S}for(var T in R){S=R[T];S.off(Q,U,this);if(P||O.isEmpty(S._events)){delete this._listeningTo[T]}}return this}};var x=/\s+/;var y=function(W,U,Q,T){if(!Q){return true}if(typeof Q==="object"){for(var S in Q){W[U].apply(W,[S,Q[S]].concat(T))}return false}if(x.test(Q)){var V=Q.split(x);for(var R=0,P=V.length;R<P;R++){W[U].apply(W,[V[R]].concat(T))}return false}return true};var b=function(U,S){var V,T=-1,R=U.length,Q=S[0],P=S[1],W=S[2];switch(S.length){case 0:while(++T<R){(V=U[T]).callback.call(V.ctx)}return;case 1:while(++T<R){(V=U[T]).callback.call(V.ctx,Q)}return;case 2:while(++T<R){(V=U[T]).callback.call(V.ctx,Q,P)}return;case 3:while(++T<R){(V=U[T]).callback.call(V.ctx,Q,P,W)}return;default:while(++T<R){(V=U[T]).callback.apply(V.ctx,S)}return}};var E={listenTo:"on",listenToOnce:"once"};O.each(E,function(P,Q){L[Q]=function(T,R,V){var S=this._listeningTo||(this._listeningTo={});var U=T._listenId||(T._listenId=O.uniqueId("l"));S[U]=T;if(!V&&typeof R==="object"){V=this}T[P](R,V,this);return this}});L.bind=L.on;L.unbind=L.off;O.extend(B,L);var G=B.Model=function(P,R){var Q=P||{};R||(R={});this.cid=O.uniqueId("c");this.attributes={};if(R.collection){this.collection=R.collection}if(R.parse){Q=this.parse(Q,R)||{}}Q=O.defaults({},Q,O.result(this,"defaults"));this.set(Q,R);this.changed={};this.initialize.apply(this,arguments)};O.extend(G.prototype,L,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(P){return O.clone(this.attributes)},sync:function(){return B.sync.apply(this,arguments)},get:function(P){return this.attributes[P]},escape:function(P){return O.escape(this.get(P))},has:function(P){return this.get(P)!=null},set:function(X,P,ab){var V,Y,Z,W,U,aa,R,T;if(X==null){return this}if(typeof X==="object"){Y=X;ab=P}else{(Y={})[X]=P}ab||(ab={});if(!this._validate(Y,ab)){return false}Z=ab.unset;U=ab.silent;W=[];aa=this._changing;this._changing=true;if(!aa){this._previousAttributes=O.clone(this.attributes);this.changed={}}T=this.attributes,R=this._previousAttributes;if(this.idAttribute in Y){this.id=Y[this.idAttribute]}for(V in Y){P=Y[V];if(!O.isEqual(T[V],P)){W.push(V)}if(!O.isEqual(R[V],P)){this.changed[V]=P}else{delete this.changed[V]}Z?delete T[V]:T[V]=P}if(!U){if(W.length){this._pending=ab}for(var S=0,Q=W.length;S<Q;S++){this.trigger("change:"+W[S],this,T[W[S]],ab)}}if(aa){return this}if(!U){while(this._pending){ab=this._pending;this._pending=false;this.trigger("change",this,ab)}}this._pending=false;this._changing=false;return this},unset:function(P,Q){return this.set(P,void 0,O.extend({},Q,{unset:true}))},clear:function(Q){var P={};for(var R in this.attributes){P[R]=void 0}return this.set(P,O.extend({},Q,{unset:true}))},hasChanged:function(P){if(P==null){return !O.isEmpty(this.changed)}return O.has(this.changed,P)},changedAttributes:function(R){if(!R){return this.hasChanged()?O.clone(this.changed):false}var T,S=false;var Q=this._changing?this._previousAttributes:this.attributes;for(var P in R){if(O.isEqual(Q[P],(T=R[P]))){continue}(S||(S={}))[P]=T}return S},previous:function(P){if(P==null||!this._previousAttributes){return null}return this._previousAttributes[P]},previousAttributes:function(){return O.clone(this._previousAttributes)},fetch:function(Q){Q=Q?O.clone(Q):{};if(Q.parse===void 0){Q.parse=true}var P=this;var R=Q.success;Q.success=function(S){if(!P.set(P.parse(S,Q),Q)){return false}if(R){R(P,S,Q)}P.trigger("sync",P,S,Q)};J(this,Q);return this.sync("read",this,Q)},save:function(T,Q,X){var U,P,W,R=this.attributes;if(T==null||typeof T==="object"){U=T;X=Q}else{(U={})[T]=Q}X=O.extend({validate:true},X);if(U&&!X.wait){if(!this.set(U,X)){return false}}else{if(!this._validate(U,X)){return false}}if(U&&X.wait){this.attributes=O.extend({},R,U)}if(X.parse===void 0){X.parse=true}var S=this;var V=X.success;X.success=function(Z){S.attributes=R;var Y=S.parse(Z,X);if(X.wait){Y=O.extend(U||{},Y)}if(O.isObject(Y)&&!S.set(Y,X)){return false}if(V){V(S,Z,X)}S.trigger("sync",S,Z,X)};J(this,X);P=this.isNew()?"create":(X.patch?"patch":"update");if(P==="patch"){X.attrs=U}W=this.sync(P,this,X);if(U&&X.wait){this.attributes=R}return W},destroy:function(Q){Q=Q?O.clone(Q):{};var P=this;var T=Q.success;var R=function(){P.trigger("destroy",P,P.collection,Q)};Q.success=function(U){if(Q.wait||P.isNew()){R()}if(T){T(P,U,Q)}if(!P.isNew()){P.trigger("sync",P,U,Q)}};if(this.isNew()){Q.success();return false}J(this,Q);var S=this.sync("delete",this,Q);if(!Q.wait){R()}return S},url:function(){var P=O.result(this,"urlRoot")||O.result(this.collection,"url")||s();if(this.isNew()){return P}return P.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(Q,P){return Q},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return !this.has(this.idAttribute)},isValid:function(P){return this._validate({},O.extend(P||{},{validate:true}))},_validate:function(R,Q){if(!Q.validate||!this.validate){return true}R=O.extend({},this.attributes,R);var P=this.validationError=this.validate(R,Q)||null;if(!P){return true}this.trigger("invalid",this,P,O.extend(Q,{validationError:P}));return false}});var a=["keys","values","pairs","invert","pick","omit"];O.each(a,function(P){G.prototype[P]=function(){var Q=o.call(arguments);Q.unshift(this.attributes);return O[P].apply(O,Q)}});var c=B.Collection=function(Q,P){P||(P={});if(P.model){this.model=P.model}if(P.comparator!==void 0){this.comparator=P.comparator}this._reset();this.initialize.apply(this,arguments);if(Q){this.reset(Q,O.extend({silent:true},P))}};var p={add:true,remove:true,merge:true};var N={add:true,remove:false};O.extend(c.prototype,L,{model:G,initialize:function(){},toJSON:function(P){return this.map(function(Q){return Q.toJSON(P)})},sync:function(){return B.sync.apply(this,arguments)},add:function(Q,P){return this.set(Q,O.extend({merge:false},P,N))},remove:function(V,S){var U=!O.isArray(V);V=U?[V]:O.clone(V);S||(S={});var T,P,R,Q;for(T=0,P=V.length;T<P;T++){Q=V[T]=this.get(V[T]);if(!Q){continue}delete this._byId[Q.id];delete this._byId[Q.cid];R=this.indexOf(Q);this.models.splice(R,1);this.length--;if(!S.silent){S.index=R;Q.trigger("remove",Q,this,S)}this._removeReference(Q,S)}return U?V[0]:V},set:function(ai,Q){Q=O.defaults({},Q,p);if(Q.parse){ai=this.parse(ai,Q)}var T=!O.isArray(ai);ai=T?(ai?[ai]:[]):O.clone(ai);var ae,ac,Y,R,aa,X,ah;var V=Q.at;var ag=this.model;var P=this.comparator&&(V==null)&&Q.sort!==false;var af=O.isString(this.comparator)?this.comparator:null;var ak=[],ab=[],Z={};var W=Q.add,S=Q.merge,aj=Q.remove;var ad=!P&&W&&aj?[]:false;for(ae=0,ac=ai.length;ae<ac;ae++){aa=ai[ae]||{};if(aa instanceof G){Y=R=aa}else{Y=aa[ag.prototype.idAttribute||"id"]}if(X=this.get(Y)){if(aj){Z[X.cid]=true}if(S){aa=aa===R?R.attributes:aa;if(Q.parse){aa=X.parse(aa,Q)}X.set(aa,Q);if(P&&!ah&&X.hasChanged(af)){ah=true}}ai[ae]=X}else{if(W){R=ai[ae]=this._prepareModel(aa,Q);if(!R){continue}ak.push(R);this._addReference(R,Q)}}R=X||R;if(ad&&(R.isNew()||!Z[R.id])){ad.push(R)}Z[R.id]=true}if(aj){for(ae=0,ac=this.length;ae<ac;++ae){if(!Z[(R=this.models[ae]).cid]){ab.push(R)}}if(ab.length){this.remove(ab,Q)}}if(ak.length||(ad&&ad.length)){if(P){ah=true}this.length+=ak.length;if(V!=null){for(ae=0,ac=ak.length;ae<ac;ae++){this.models.splice(V+ae,0,ak[ae])}}else{if(ad){this.models.length=0}var U=ad||ak;for(ae=0,ac=U.length;ae<ac;ae++){this.models.push(U[ae])}}}if(ah){this.sort({silent:true})}if(!Q.silent){for(ae=0,ac=ak.length;ae<ac;ae++){(R=ak[ae]).trigger("add",R,this,Q)}if(ah||(ad&&ad.length)){this.trigger("sort",this,Q)}}return T?ai[0]:ai},reset:function(S,Q){Q||(Q={});for(var R=0,P=this.models.length;R<P;R++){this._removeReference(this.models[R],Q)}Q.previousModels=this.models;this._reset();S=this.add(S,O.extend({silent:true},Q));if(!Q.silent){this.trigger("reset",this,Q)}return S},push:function(Q,P){return this.add(Q,O.extend({at:this.length},P))},pop:function(Q){var P=this.at(this.length-1);this.remove(P,Q);return P},unshift:function(Q,P){return this.add(Q,O.extend({at:0},P))},shift:function(Q){var P=this.at(0);this.remove(P,Q);return P},slice:function(){return o.apply(this.models,arguments)},get:function(P){if(P==null){return void 0}return this._byId[P]||this._byId[P.id]||this._byId[P.cid]},at:function(P){return this.models[P]},where:function(P,Q){if(O.isEmpty(P)){return Q?void 0:[]}return this[Q?"find":"filter"](function(R){for(var S in P){if(P[S]!==R.get(S)){return false}}return true})},findWhere:function(P){return this.where(P,true)},sort:function(P){if(!this.comparator){throw new Error("Cannot sort a set without a comparator")}P||(P={});if(O.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(O.bind(this.comparator,this))}if(!P.silent){this.trigger("sort",this,P)}return this},pluck:function(P){return O.invoke(this.models,"get",P)},fetch:function(P){P=P?O.clone(P):{};if(P.parse===void 0){P.parse=true}var R=P.success;var Q=this;P.success=function(S){var T=P.reset?"reset":"set";Q[T](S,P);if(R){R(Q,S,P)}Q.trigger("sync",Q,S,P)};J(this,P);return this.sync("read",this,P)},create:function(Q,P){P=P?O.clone(P):{};if(!(Q=this._prepareModel(Q,P))){return false}if(!P.wait){this.add(Q,P)}var S=this;var R=P.success;P.success=function(T,U){if(P.wait){S.add(T,P)}if(R){R(T,U,P)}};Q.save(null,P);return Q},parse:function(Q,P){return Q},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(R,Q){if(R instanceof G){return R}Q=Q?O.clone(Q):{};Q.collection=this;var P=new this.model(R,Q);if(!P.validationError){return P}this.trigger("invalid",this,P.validationError,Q);return false},_addReference:function(Q,P){this._byId[Q.cid]=Q;if(Q.id!=null){this._byId[Q.id]=Q}if(!Q.collection){Q.collection=this}Q.on("all",this._onModelEvent,this)},_removeReference:function(Q,P){if(this===Q.collection){delete Q.collection}Q.off("all",this._onModelEvent,this)},_onModelEvent:function(R,Q,S,P){if((R==="add"||R==="remove")&&S!==this){return}if(R==="destroy"){this.remove(Q,P)}if(Q&&R==="change:"+Q.idAttribute){delete this._byId[Q.previous(Q.idAttribute)];if(Q.id!=null){this._byId[Q.id]=Q}}this.trigger.apply(this,arguments)}});var A=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];O.each(A,function(P){c.prototype[P]=function(){var Q=o.call(arguments);Q.unshift(this.models);return O[P].apply(O,Q)}});var l=["groupBy","countBy","sortBy","indexBy"];O.each(l,function(P){c.prototype[P]=function(S,Q){var R=O.isFunction(S)?S:function(T){return T.get(S)};return O[P](this.models,R,Q)}});var I=B.View=function(P){this.cid=O.uniqueId("view");P||(P={});O.extend(this,O.pick(P,e));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var w=/^(\S+)\s*(.*)$/;var e=["model","collection","el","id","attributes","className","tagName","events"];O.extend(I.prototype,L,{tagName:"div",$:function(P){return this.$el.find(P)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(P,Q){if(this.$el){this.undelegateEvents()}this.$el=P instanceof B.$?P:B.$(P);this.el=this.$el[0];if(Q!==false){this.delegateEvents()}return this},delegateEvents:function(T){if(!(T||(T=O.result(this,"events")))){return this}this.undelegateEvents();for(var S in T){var U=T[S];if(!O.isFunction(U)){U=this[T[S]]}if(!U){continue}var R=S.match(w);var Q=R[1],P=R[2];U=O.bind(U,this);Q+=".delegateEvents"+this.cid;if(P===""){this.$el.on(Q,U)}else{this.$el.on(Q,P,U)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var P=O.extend({},O.result(this,"attributes"));if(this.id){P.id=O.result(this,"id")}if(this.className){P["class"]=O.result(this,"className")}var Q=B.$("<"+O.result(this,"tagName")+">").attr(P);this.setElement(Q,false)}else{this.setElement(O.result(this,"el"),false)}}});B.sync=function(V,Q,P){var S=k[V];O.defaults(P||(P={}),{emulateHTTP:B.emulateHTTP,emulateJSON:B.emulateJSON});var U={type:S,dataType:"json"};if(!P.url){U.url=O.result(Q,"url")||s()}if(P.data==null&&Q&&(V==="create"||V==="update"||V==="patch")){U.contentType="application/json";U.data=JSON.stringify(P.attrs||Q.toJSON(P))}if(P.emulateJSON){U.contentType="application/x-www-form-urlencoded";U.data=U.data?{model:U.data}:{}}if(P.emulateHTTP&&(S==="PUT"||S==="DELETE"||S==="PATCH")){U.type="POST";if(P.emulateJSON){U.data._method=S}var R=P.beforeSend;P.beforeSend=function(W){W.setRequestHeader("X-HTTP-Method-Override",S);if(R){return R.apply(this,arguments)}}}if(U.type!=="GET"&&!P.emulateJSON){U.processData=false}if(U.type==="PATCH"&&j){U.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var T=P.xhr=B.ajax(O.extend(U,P));Q.trigger("request",Q,T,P);return T};var j=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};B.ajax=function(){return B.$.ajax.apply(B.$,arguments)};var q=B.Router=function(P){P||(P={});if(P.routes){this.routes=P.routes}this._bindRoutes();this.initialize.apply(this,arguments)};var r=/\((.*?)\)/g;var t=/(\(\?)?:\w+/g;var d=/\*\w+/g;var h=/[\-{}\[\]+?.,\\\^$|#\s]/g;O.extend(q.prototype,L,{initialize:function(){},route:function(Q,R,S){if(!O.isRegExp(Q)){Q=this._routeToRegExp(Q)}if(O.isFunction(R)){S=R;R=""}if(!S){S=this[R]}var P=this;B.history.route(Q,function(U){var T=P._extractParameters(Q,U);P.execute(S,T);P.trigger.apply(P,["route:"+R].concat(T));P.trigger("route",R,T);B.history.trigger("route",P,R,T)});return this},execute:function(Q,P){if(Q){Q.apply(this,P)}},navigate:function(Q,P){B.history.navigate(Q,P);return this},_bindRoutes:function(){if(!this.routes){return}this.routes=O.result(this,"routes");var Q,P=O.keys(this.routes);while((Q=P.pop())!=null){this.route(Q,this.routes[Q])}},_routeToRegExp:function(P){P=P.replace(h,"\\$&").replace(r,"(?:$1)?").replace(t,function(R,Q){return Q?R:"([^/?]+)"}).replace(d,"([^?]*?)");return new RegExp("^"+P+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(P,Q){var R=P.exec(Q).slice(1);return O.map(R,function(T,S){if(S===R.length-1){return T||null}return T?decodeURIComponent(T):null})}});var i=B.History=function(){this.handlers=[];O.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var C=/^[#\/]|\s+$/g;var f=/^\/+|\/+$/g;var K=/msie [\w.]+/;var n=/\/$/;var H=/#.*$/;i.started=false;O.extend(i.prototype,L,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(Q){var P=(Q||this).location.href.match(/#(.*)$/);return P?P[1]:""},getFragment:function(R,Q){if(R==null){if(this._hasPushState||!this._wantsHashChange||Q){R=decodeURI(this.location.pathname+this.location.search);var P=this.root.replace(n,"");if(!R.indexOf(P)){R=R.slice(P.length)}}else{R=this.getHash()}}return R.replace(C,"")},start:function(R){if(i.started){throw new Error("Backbone.history has already been started")}i.started=true;this.options=O.extend({root:"/"},this.options,R);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var Q=this.getFragment();var P=document.documentMode;var S=(K.exec(navigator.userAgent.toLowerCase())&&(!P||P<=7));this.root=("/"+this.root+"/").replace(f,"/");if(S&&this._wantsHashChange){var U=B.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=U.hide().appendTo("body")[0].contentWindow;this.navigate(Q)}if(this._hasPushState){B.$(window).on("popstate",this.checkUrl)}else{if(this._wantsHashChange&&("onhashchange" in window)&&!S){B.$(window).on("hashchange",this.checkUrl)}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}}}this.fragment=Q;var T=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.fragment=this.getFragment(null,true);this.location.replace(this.root+"#"+this.fragment);return true}else{if(this._hasPushState&&this.atRoot()&&T.hash){this.fragment=this.getHash().replace(C,"");this.history.replaceState({},document.title,this.root+this.fragment)}}}if(!this.options.silent){return this.loadUrl()}},stop:function(){B.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);if(this._checkUrlInterval){clearInterval(this._checkUrlInterval)}i.started=false},route:function(P,Q){this.handlers.unshift({route:P,callback:Q})},checkUrl:function(Q){var P=this.getFragment();if(P===this.fragment&&this.iframe){P=this.getFragment(this.getHash(this.iframe))}if(P===this.fragment){return false}if(this.iframe){this.navigate(P)}this.loadUrl()},loadUrl:function(P){P=this.fragment=this.getFragment(P);return O.any(this.handlers,function(Q){if(Q.route.test(P)){Q.callback(P);return true}})},navigate:function(R,Q){if(!i.started){return false}if(!Q||Q===true){Q={trigger:!!Q}}var P=this.root+(R=this.getFragment(R||""));R=R.replace(H,"");if(this.fragment===R){return}this.fragment=R;if(R===""&&P!=="/"){P=P.slice(0,-1)}if(this._hasPushState){this.history[Q.replace?"replaceState":"pushState"]({},document.title,P)}else{if(this._wantsHashChange){this._updateHash(this.location,R,Q.replace);if(this.iframe&&(R!==this.getFragment(this.getHash(this.iframe)))){if(!Q.replace){this.iframe.document.open().close()}this._updateHash(this.iframe.location,R,Q.replace)}}else{return this.location.assign(P)}}if(Q.trigger){return this.loadUrl(R)}},_updateHash:function(P,R,S){if(S){var Q=P.href.replace(/(javascript:|#).*$/,"");P.replace(Q+"#"+R)}else{P.hash="#"+R}}});B.history=new i;var m=function(P,R){var Q=this;var T;if(P&&O.has(P,"constructor")){T=P.constructor}else{T=function(){return Q.apply(this,arguments)}}O.extend(T,Q,R);var S=function(){this.constructor=T};S.prototype=Q.prototype;T.prototype=new S;if(P){O.extend(T.prototype,P)}T.__super__=Q.prototype;return T};G.extend=c.extend=q.extend=I.extend=i.extend=m;var s=function(){throw new Error('A "url" property or function must be specified')};var J=function(R,Q){var P=Q.error;Q.error=function(S){if(P){P(R,S,Q)}R.trigger("error",R,S,Q)}};return B}));(function(b){function d(e){this.context="body";this.selector=null;M.mix(this,e);if(!this.selector.length){M.error("please specify the selector!")}this.init()}var a=navigator.userAgent.toLowerCase().match(/msie [\d.]+/),c=a?parseFloat(a[0].substr(5)):false;M.mix(d.prototype,{init:function(){if(c&&c<=9){$(this.selector).mouseenter(M.bind(this.mouseenter,this));$(this.selector).mousemove(M.bind(this.mousemove,this));$(this.selector).mouseleave(M.bind(this.mouseleave,this))}else{$(this.context).on("mouseenter",this.selector,M.bind(this.mouseenter,this));$(this.context).on("mousemove",this.selector,M.bind(this.mousemove,this));$(this.context).on("mouseleave",this.selector,M.bind(this.mouseleave,this))}},mouseenter:function(e){var f=$(e.currentTarget);if(!f.data("tip")){f.data("tip",this.createTip(f))}else{f.data("tip",this.updateTip(f))}f.data("tip").fadeIn(100);f.data("mouseenter",true)},mousemove:function(e){var f=$(e.currentTarget);if(f.data("mouseenter")){f.data("tip").css({left:e.pageX+10,top:e.pageY+10})}},mouseleave:function(e){var f=$(e.currentTarget);f.data("tip").fadeOut(100);f.data("mouseenter",false);this.recoverTip(f)},createTip:$.noop,updateTip:function(e){return e.data("tip")},recoverTip:$.noop});b.MouseTip=d}(window));
/*! snabbt.js v0.5.1 built: 2015-03-29  (c)2015 Daniel Lundin @license MIT */
!function(e,d){var f=d();"object"==typeof exports?module.exports=f:"function"==typeof define&&define.amd?define([],function(){return e.returnExportsGlobal=f}):e.snabbt=f}(this,function(){var aO=[],aN=[],aM=[],aL="transform",aK=window.getComputedStyle(document.documentElement,""),aJ=(Array.prototype.slice.call(aK).join("").match(/-(moz|webkit|ms)-/)||""===aK.OLink&&["","o"])[1];"webkit"===aJ&&(aL="webkitTransform");var aI=function(i,h,n){var m=i;if(void 0!==m.length){for(var l={chainers:[],then:function(b){return console.log("DeprecationWarning: then() is renamed to snabbt()"),this.snabbt(b)},snabbt:function(d){var c=this.chainers.length;return this.chainers.forEach(function(b,a){b.snabbt(aH(d,a,c))}),l},setValue:function(b){return this.chainers.forEach(function(a){a.setValue(b)}),l},finish:function(){return this.chainers.forEach(function(b){b.finish()}),l},rollback:function(){return this.chainers.forEach(function(b){b.rollback()}),l}},k=0,j=m.length;j>k;++k){l.chainers.push("string"==typeof h?aG(m[k],h,aH(n,k,j)):aG(m[k],aH(h,k,j),n))}return l}return"string"==typeof h?aG(m,h,aH(n,0,1)):aG(m,aH(h,0,1),n)},aH=function(g,f,j){if(!g){return g}var i=U(g);V(g.delay)&&(i.delay=g.delay(f,j)),V(g.callback)&&(console.log("DeprecationWarning: callback is renamed to complete"),i.complete=function(){g.callback(f,j)}),V(g.complete)&&(i.complete=function(){g.complete(f,j)}),V(g.valueFeeder)&&(i.valueFeeder=function(b,a){return g.valueFeeder(b,a,f,j)}),V(g.easing)&&(i.easing=function(a){return g.easing(a,f,j)});var h=["position","rotation","skew","rotationPost","scale","width","height","opacity","fromPosition","fromRotation","fromSkew","fromRotationPost","fromScale","fromWidth","fromHeight","fromOpacity","transformOrigin","duration","delay"];return h.forEach(function(a){V(g[a])&&(i[a]=g[a](f,j))}),i},aG=function(r,q,p){function o(a){return x.tick(a),x.updateElement(r),x.isStopped()?void 0:x.completed()?void (m.loop>1&&!x.isStopped()?(m.loop-=1,x.restart(),ax(o)):(m.complete&&m.complete(r),w.length&&(m=w.pop(),j=az(m,h,!0),h=az(m,U(h)),m=ay(j,h,m),x=av(m),aN.push([r,x]),x.tick(a),ax(o)))):ax(o)}if("attention"===q){return aF(r,p)}if("stop"===q){return aE(r)}var m=q;aC();var k=aA(r),j=k;j=az(m,j,!0);var h=U(k);h=az(m,h);var b=ay(j,h,m),x=av(b);aN.push([r,x]),x.updateElement(r);var w=[],t={snabbt:function(c){return w.unshift(aH(c,0,1)),t},then:function(c){return console.log("DeprecationWarning: then() is renamed to snabbt()"),this.snabbt(c)}};return ax(o),m.manual?x:t},aF=function(b,j){function i(a){g.tick(a),g.updateElement(b),g.completed()?(j.callback&&j.callback(b),j.loop&&j.loop>1&&(j.loop--,g.restart(),ax(i))):ax(i)}var h=az(j);j.movement=h;var g=au(j);aN.push([b,g]),ax(i)},aE=function(b){for(var l=0,k=aN.length;k>l;++l){var j=aN[l],i=j[0],h=j[1];i===b&&h.stop()}},aD=function(j,i){for(var p=0,o=j.length;o>p;++p){var n=j[p],m=n[0],l=n[1];if(m===i){var k=l.getCurrentState();return l.stop(),k}}},aC=function(){aM=aM.filter(function(b){return aB(b[0]).body})},aB=function(d){for(var c=d;c.parentNode;){c=c.parentNode}return c},aA=function(b){var c=aD(aN,b);return c?c:aD(aM,b)},az=function(v,u,t){u||(u=ab({}));var s="position",r="rotation",q="skew",p="rotationPost",o="scale",n="width",m="height",l="opacity";return t&&(s="fromPosition",r="fromRotation",q="fromSkew",p="fromRotationPost",o="fromScale",n="fromWidth",m="fromHeight",l="fromOpacity"),u.position=Y(v[s],u.position),u.rotation=Y(v[r],u.rotation),u.rotationPost=Y(v[p],u.rotationPost),u.skew=Y(v[q],u.skew),u.scale=Y(v[o],u.scale),u.opacity=v[l],u.width=v[n],u.height=v[m],u},ay=function(e,d,f){return f.startState=e,f.endState=d,f},ax=function(a){0===aO.length&&window.requestAnimationFrame(aw),aO.push(a)},aw=function(h){for(var c=aO.length,b=0;c>b;++b){aO[b](h)}aO.splice(0,c);var a=aN.filter(function(d){return d[1].completed()});aM=aM.filter(function(e){for(var d=0,f=a.length;f>d;++d){if(e[0]===a[d][0]){return !1}}return !0}),aM=aM.concat(a),aN=aN.filter(function(d){return !d[1].completed()}),0!==aO.length&&window.requestAnimationFrame(aw)},av=function(H){var G=H.startState,F=H.endState,E=Y(H.duration,500),D=Y(H.delay,0),C=H.perspective,B=am(Y(H.easing,"linear"),H),A=G.clone();H.transformOrigin;A.transformOrigin=H.transformOrigin;var z,y,x=0,w=0,v=!1,u=!1,t=H.manual,s=0,r=D/E;return y=H.valueFeeder?Z(H.valueFeeder,G,F,A):aa(G,F,A),{stop:function(){v=!0},isStopped:function(){return v},finish:function(d){t=!1;var c=E*s;x=w-c,z=d,B.resetFrom=s},rollback:function(d){t=!1,y.setReverse();var c=E*(1-s);x=w-c,z=d,B.resetFrom=s},restart:function(){x=void 0,B.resetFrom(0)},tick:function(d){if(!v){if(t){return w=d,void this.updateCurrentTransform()}if(x||(x=d),d-x>D){u=!0,w=d-D;var c=Math.min(Math.max(0,w-x),E);B.tick(c/E),this.updateCurrentTransform(),this.completed()&&z&&z()}}},getCurrentState:function(){return A},setValue:function(b){u=!0,s=Math.min(Math.max(b,0.0001),1+r)},updateCurrentTransform:function(){var b=B.getValue();t&&(b=Math.max(0.00001,s-r)),y.tween(b)},completed:function(){return v?!0:0===x?!1:B.completed()},updateElement:function(e){if(u){var d=y.asMatrix(),f=y.getProperties();X(e,d,C),W(e,f)}}}},au=function(g){var f=g.movement,j=ab({});g.initialVelocity=0.1,g.equilibriumPosition=0;var i=ao(g),h=!1;return{stop:function(){h=!0},isStopped:function(){return h},tick:function(){h||i.equilibrium||(i.tick(),this.updateMovement())},updateMovement:function(){var b=i.getValue();j.position[0]=f.position[0]*b,j.position[1]=f.position[1]*b,j.position[2]=f.position[2]*b,j.rotation[0]=f.rotation[0]*b,j.rotation[1]=f.rotation[1]*b,j.rotation[2]=f.rotation[2]*b,j.rotationPost[0]=f.rotationPost[0]*b,j.rotationPost[1]=f.rotationPost[1]*b,j.rotationPost[2]=f.rotationPost[2]*b,1!==f.scale[0]&&1!==f.scale[1]&&(j.scale[0]=1+f.scale[0]*b,j.scale[1]=1+f.scale[1]*b),j.skew[0]=f.skew[0]*b,j.skew[1]=f.skew[1]*b},updateElement:function(b){X(b,j.asMatrix()),W(b,j.getProperties())},getCurrentState:function(){return j},completed:function(){return i.equilibrium||h},restart:function(){i=ao(g)}}},at=function(b){return b},ar=function(b){return(Math.cos(b*Math.PI+Math.PI)+1)/2},aq=function(b){return b*b},ap=function(b){return -Math.pow(b-1,2)+1},ao=function(j){var i=Y(j.startPosition,0),p=Y(j.equilibriumPosition,1),o=Y(j.initialVelocity,0),n=Y(j.springConstant,0.8),m=Y(j.springDeceleration,0.9),l=Y(j.springMass,10),k=!1;return{tick:function(b){if(0!==b&&!k){var d=-(i-p)*n,c=d/l;o+=c,i+=o,o*=m,Math.abs(i-p)<0.001&&Math.abs(o)<0.001&&(k=!0)}},resetFrom:function(b){i=b,o=0},getValue:function(){return k?p:i},completed:function(){return k}}},an={linear:at,ease:ar,easeIn:aq,easeOut:ap},am=function(h,g){if("spring"==h){return ao(g)}var l=h;V(h)||(l=an[h]);var k,j=l,i=0;return{tick:function(b){i=j(b),k=b},resetFrom:function(){k=0},getValue:function(){return i},completed:function(){return k>=1?k:!1}}},al=function(f,e,h,g){f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=e,f[13]=h,f[14]=g,f[15]=1},ak=function(d,c){d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=Math.cos(c),d[6]=-Math.sin(c),d[7]=0,d[8]=0,d[9]=Math.sin(c),d[10]=Math.cos(c),d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1},aj=function(d,c){d[0]=Math.cos(c),d[1]=0,d[2]=Math.sin(c),d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=-Math.sin(c),d[9]=0,d[10]=Math.cos(c),d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1},ai=function(d,c){d[0]=Math.cos(c),d[1]=-Math.sin(c),d[2]=0,d[3]=0,d[4]=Math.sin(c),d[5]=Math.cos(c),d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1},ah=function(e,d,f){e[0]=1,e[1]=Math.tan(d),e[2]=0,e[3]=0,e[4]=Math.tan(f),e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1},ag=function(e,d,f){e[0]=d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1},af=function(b){b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1},ae=function(d,c){c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],c[9]=d[9],c[10]=d[10],c[11]=d[11],c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15]},ad=function(){var e=new Float32Array(16),d=new Float32Array(16),f=new Float32Array(16);return af(e),{data:e,asCSS:function(){for(var a="matrix3d(",g=0;15>g;++g){a+=Math.abs(e[g])<0.0001?"0,":e[g].toFixed(10)+","}return a+=Math.abs(e[15])<0.0001?"0)":e[15].toFixed(10)+")"},clear:function(){af(e)},translate:function(c,b,a){return ae(e,d),al(f,c,b,a),ac(d,f,e),this},rotateX:function(a){return ae(e,d),ak(f,a),ac(d,f,e),this},rotateY:function(a){return ae(e,d),aj(f,a),ac(d,f,e),this},rotateZ:function(a){return ae(e,d),ai(f,a),ac(d,f,e),this},scale:function(b,a){return ae(e,d),ag(f,b,a),ac(d,f,e),this},skew:function(b,a){return ae(e,d),ah(f,b,a),ac(d,f,e),this}}},ac=function(e,d,f){return f[0]=e[0]*d[0]+e[1]*d[4]+e[2]*d[8]+e[3]*d[12],f[1]=e[0]*d[1]+e[1]*d[5]+e[2]*d[9]+e[3]*d[13],f[2]=e[0]*d[2]+e[1]*d[6]+e[2]*d[10]+e[3]*d[14],f[3]=e[0]*d[3]+e[1]*d[7]+e[2]*d[11]+e[3]*d[15],f[4]=e[4]*d[0]+e[5]*d[4]+e[6]*d[8]+e[7]*d[12],f[5]=e[4]*d[1]+e[5]*d[5]+e[6]*d[9]+e[7]*d[13],f[6]=e[4]*d[2]+e[5]*d[6]+e[6]*d[10]+e[7]*d[14],f[7]=e[4]*d[3]+e[5]*d[7]+e[6]*d[11]+e[7]*d[15],f[8]=e[8]*d[0]+e[9]*d[4]+e[10]*d[8]+e[11]*d[12],f[9]=e[8]*d[1]+e[9]*d[5]+e[10]*d[9]+e[11]*d[13],f[10]=e[8]*d[2]+e[9]*d[6]+e[10]*d[10]+e[11]*d[14],f[11]=e[8]*d[3]+e[9]*d[7]+e[10]*d[11]+e[11]*d[15],f[12]=e[12]*d[0]+e[13]*d[4]+e[14]*d[8]+e[15]*d[12],f[13]=e[12]*d[1]+e[13]*d[5]+e[14]*d[9]+e[15]*d[13],f[14]=e[12]*d[2]+e[13]*d[6]+e[14]*d[10]+e[15]*d[14],f[15]=e[12]*d[3]+e[13]*d[7]+e[14]*d[11]+e[15]*d[15],f},ab=function(e){var d=ad(),f={opacity:void 0,width:void 0,height:void 0};return{position:Y(e.position,[0,0,0]),rotation:Y(e.rotation,[0,0,0]),rotationPost:Y(e.rotationPost,[0,0,0]),skew:Y(e.skew,[0,0]),scale:Y(e.scale,[1,1]),opacity:e.opacity,width:e.width,height:e.height,clone:function(){return ab({position:this.position.slice(0),rotation:this.rotation.slice(0),rotationPost:this.rotationPost.slice(0),skew:this.skew.slice(0),scale:this.scale.slice(0),height:this.height,width:this.width,opacity:this.opacity})},asMatrix:function(){var b=d;return b.clear(),this.transformOrigin&&b.translate(-this.transformOrigin[0],-this.transformOrigin[1],-this.transformOrigin[2]),(1!==this.scale[0]||1!==this.scale[1])&&b.scale(this.scale[0],this.scale[1]),(0!==this.skew[0]||0!==this.skew[1])&&b.skew(this.skew[0],this.skew[1]),(0!==this.rotation[0]||0!==this.rotation[1]||0!==this.rotation[2])&&(b.rotateX(this.rotation[0]),b.rotateY(this.rotation[1]),b.rotateZ(this.rotation[2])),(0!==this.position[0]||0!==this.position[1]||0!==this.position[2])&&b.translate(this.position[0],this.position[1],this.position[2]),(0!==this.rotationPost[0]||0!==this.rotationPost[1]||0!==this.rotationPost[2])&&(b.rotateX(this.rotationPost[0]),b.rotateY(this.rotationPost[1]),b.rotateZ(this.rotationPost[2])),this.transformOrigin&&b.translate(this.transformOrigin[0],this.transformOrigin[1],this.transformOrigin[2]),b},getProperties:function(){return f.opacity=this.opacity,f.width=this.width+"px",f.height=this.height+"px",f}}},aa=function(h,g,l){var k=h,j=g,i=l;return{tween:function(F){var E=j.position[0]-k.position[0],D=j.position[1]-k.position[1],C=j.position[2]-k.position[2],B=j.rotation[0]-k.rotation[0],A=j.rotation[1]-k.rotation[1],z=j.rotation[2]-k.rotation[2],y=j.rotationPost[0]-k.rotationPost[0],x=j.rotationPost[1]-k.rotationPost[1],w=j.rotationPost[2]-k.rotationPost[2],v=j.scale[0]-k.scale[0],u=j.scale[1]-k.scale[1],f=j.skew[0]-k.skew[0],e=j.skew[1]-k.skew[1],d=j.width-k.width,H=j.height-k.height,G=j.opacity-k.opacity;i.position[0]=k.position[0]+F*E,i.position[1]=k.position[1]+F*D,i.position[2]=k.position[2]+F*C,i.rotation[0]=k.rotation[0]+F*B,i.rotation[1]=k.rotation[1]+F*A,i.rotation[2]=k.rotation[2]+F*z,i.rotationPost[0]=k.rotationPost[0]+F*y,i.rotationPost[1]=k.rotationPost[1]+F*x,i.rotationPost[2]=k.rotationPost[2]+F*w,i.skew[0]=k.skew[0]+F*f,i.skew[1]=k.skew[1]+F*e,i.scale[0]=k.scale[0]+F*v,i.scale[1]=k.scale[1]+F*u,void 0!==j.width&&(i.width=k.width+F*d),void 0!==j.height&&(i.height=k.height+F*H),void 0!==j.opacity&&(i.opacity=k.opacity+F*G)},asMatrix:function(){return i.asMatrix()},getProperties:function(){return i.getProperties()},setReverse:function(){var b=k;k=j,j=b}}},Z=function(r,q,p,o){var n=r(0,ad()),m=q,l=p,k=o,j=!1;return{tween:function(a){j&&(a=1-a),n.clear(),n=r(a,n);var g=l.width-m.width,f=l.height-m.height,e=l.opacity-m.opacity;void 0!==l.width&&(k.width=m.width+a*g),void 0!==l.height&&(k.height=m.height+a*f),void 0!==l.opacity&&(k.opacity=m.opacity+a*e)},asMatrix:function(){return n},getProperties:function(){return k.getProperties()},setReverse:function(){j=!0}}},Y=function(d,c){return"undefined"==typeof d?c:d},X=function(g,d,j){var i="";j&&(i="perspective("+j+"px) ");var h=d.asCSS();g.style[aL]=i+h},W=function(e,d){for(var f in d){e.style[f]=d[f]}},V=function(b){return"function"==typeof b},U=function(e){if(!e){return e}var d={};for(var f in e){d[f]=e[f]}return d};return window.jQuery&&!function(b){b.fn.snabbt=function(d,c){return aI(this.get(),d,c)}}(jQuery),aI.createMatrix=ad,aI.setElementTransform=X,aI});